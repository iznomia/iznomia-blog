---
wiki: oi-note
title: 状态设计
katex: true
---

动态规划是 OI 最重要的部分之一。从学习与做题的角度来说，主要分为设计状态与优化两部分。其中前者更多的是做题和总结方法与套路，甚至需要一定的灵感；而后者相对吃经验。

值得注意的是，很多题目都要求我们在设计算法以前先将题目进行一定的转化，从而将一个不熟悉的模型转化为我们更容易把握的模型。这一点在动态规划的题目中体现的尤为明显。

在阅读本文之前，你应该对动态规划有基本的了解。

## 线性 DP

在线性结构上枚举每一维度进行转移的 DP。

{% box color:blue %}
[\[CF1810G\] The Maximum Prefix](https://www.luogu.com.cn/problem/CF1810G)。

较复杂，见原题面。
{% endbox %}

直接做怎么做？设 $f_i$ 表示前 $i$ 个数，当前前缀和为 $j$，最大前缀和为 $k$，然后刷表转移对于每个状态是 $O(1)$ 的，炸了。

需要合并无效状态。考虑对于一段后缀，如果它本身的最大前缀和是 $0$，那么它不会对前面的贡献产生影响。也就是说，对于任意一段后缀，其能对整个序列的最大前缀和产生贡献的都是其最大前缀和。

设 $f_{i,j}$ 代表考虑前 $i$ 个数，且满足 $[i+1,n]$ 的最大前缀和为 $j$ 的期望答案。可以以 $p_i$ 的系数转移到 $f_{i+1,j-1}$，$1-p_i$ 的系数转移到 $f_{i+1,j+1}$。

答案便是 $f_{i,0}$。[代码](https://codeforces.com/problemset/submission/1810/325098522)。

## 背包

背包的变种很多，且都比较简单。基本模型：01 背包、完全背包、多重背包、分组背包、[方案数背包的撤回](https://www.luogu.com.cn/problem/P4141)（将转移的东西减去即可）。

## 区间 DP

## 图上 DP

## 状压 DP 与轮廓线 DP

## 动态 DP

## 其它 DP

一些杂项内容

### 插入法

### 数位 DP



## 例题